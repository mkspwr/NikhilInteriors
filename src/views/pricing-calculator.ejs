<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Pricing Calculator | Nikhil Interiors</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <!-- Replace this line -->
    <!-- <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css"> -->
    
    <!-- With this updated Font Awesome CDN link -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="stylesheet" href="/styles/calculator.css">
</head>

<body>
    <header class="header">
        <div class="container">
            <div class="logo">
                <h1>Nikhil Interiors</h1>
                <p class="tagline">Design • Create • Inspire</p>
            </div>
            <nav class="main-nav">
                <ul>
                    <li><a href="/">Home</a></li>
                    <li><a href="/#services">Services</a></li>
                    <li><a href="/#portfolio">Portfolio</a></li>
                    <li><a href="/#pricing">Pricing</a></li>
                    <li><a href="/#contact">Contact</a></li>
                    <li><a href="/auth/google" class="btn-login">Client Login</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <section class="calculator-section">
        <div class="container">
            <h1 class="section-title">Pricing Calculator</h1>
            <p class="calculator-intro">Get an approximate estimate for your interior design project. Please note that
                the final price may vary based on specific requirements, materials chosen, and site conditions.</p>

            <div class="calculator-container">
                <form id="calculator-form">
                    <div class="form-progress-container">
                        <div class="form-progress">
                            <div class="progress-step active" data-step="1">Project Type</div>
                            <div class="progress-step" data-step="2">Details</div>
                            <div class="progress-step" data-step="3">Features</div>
                            <div class="progress-step" data-step="4">Contact</div>
                        </div>
                    </div>

                    <!-- Step 1: Project Type -->
                    <div class="form-step active" id="step-1">
                        <h2>Select Project Type</h2>
                        <div class="project-type-grid">
                            <div class="project-type-card" data-type="residential-house">
                                <i class="fas fa-home"></i>
                                <h3>Residential House</h3>
                                <p>Complete interior solutions for independent houses</p>
                            </div>
                            <div class="project-type-card" data-type="residential-apartment">
                                <i class="fas fa-building"></i>
                                <h3>Residential Apartment</h3>
                                <p>Custom designs for apartment living</p>
                            </div>
                            <div class="project-type-card" data-type="office">
                                <i class="fas fa-briefcase"></i>
                                <h3>Office Space</h3>
                                <p>Professional environments for business</p>
                            </div>
                        </div>
                        <input type="hidden" name="projectType" id="projectType" required>
                        <div class="form-navigation">
                            <button type="button" class="btn btn-primary next-btn" disabled>Continue</button>
                        </div>
                    </div>

                    <!-- Step 2: Project Details -->
                    <div class="form-step" id="step-2">
                        <h2>Project Details</h2>
                        
                        <div class="form-group highlight">
                            <label for="area">Area</label>
                            <div class="input-group">
                                <input type="number" id="area" name="area" min="100" required placeholder="Enter total area">
                                <span class="input-unit">sq ft</span>
                            </div>
                        </div>
                        
                        <div class="form-group highlight">
                            <label for="rooms">Number of Rooms</label>
                            <div class="input-group">
                                <input type="number" id="rooms" name="rooms" min="1" value="1" required>
                                <span class="input-unit">rooms</span>
                            </div>
                        </div>
                        
                        <!-- Form navigation -->
                        <div class="form-navigation">
                            <button type="button" class="btn btn-secondary prev-btn">Previous</button>
                            <button type="button" class="btn btn-primary next-btn">Continue</button>
                        </div>
                    </div>

                    <!-- Step 3: Features Level -->
                    <div class="form-step" id="step-3">
                        <h2>Select Feature Level</h2>
                        <div class="feature-level-grid">
                            <div class="feature-level-card" data-level="basic">
                                <div class="level-header">
                                    <h3>Basic</h3>
                                    <span class="price-range">₹ 1,000 - 1,500 /sq. ft.</span>
                                </div>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Standard materials</li>
                                    <li><i class="fas fa-check"></i> Essential fixtures and fittings</li>
                                    <li><i class="fas fa-check"></i> Functional design</li>
                                    <li><i class="fas fa-check"></i> 1 year warranty</li>
                                </ul>
                            </div>
                            <div class="feature-level-card" data-level="premium">
                                <div class="level-header">
                                    <h3>Premium</h3>
                                    <span class="price-range">₹ 1,600 - 2,200 /sq. ft.</span>
                                </div>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> High-quality materials</li>
                                    <li><i class="fas fa-check"></i> Designer fixtures</li>
                                    <li><i class="fas fa-check"></i> Custom solutions</li>
                                    <li><i class="fas fa-check"></i> 2 year warranty</li>
                                    <li><i class="fas fa-check"></i> Advanced lighting</li>
                                </ul>
                            </div>
                            <div class="feature-level-card" data-level="luxury">
                                <div class="level-header">
                                    <h3>Luxury</h3>
                                    <span class="price-range">₹ 2,300+ /sq. ft.</span>
                                </div>
                                <ul class="feature-list">
                                    <li><i class="fas fa-check"></i> Premium imported materials</li>
                                    <li><i class="fas fa-check"></i> High-end fixtures</li>
                                    <li><i class="fas fa-check"></i> Bespoke solutions</li>
                                    <li><i class="fas fa-check"></i> 3 year warranty</li>
                                    <li><i class="fas fa-check"></i> Smart home integration</li>
                                    <li><i class="fas fa-check"></i> Signature design elements</li>
                                </ul>
                            </div>
                        </div>
                        <input type="hidden" name="featureLevel" id="featureLevel" required>
                        <div class="form-navigation">
                            <button type="button" class="btn btn-secondary prev-btn">Back</button>
                            <button type="button" class="btn btn-primary next-btn" disabled>Continue</button>
                        </div>
                    </div>

                    <!-- Step 4: Contact Information -->
                    <div class="form-step" id="step-4">
                        <h2>Contact Information</h2>
                        
                        <div class="contact-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="name">Full Name</label>
                                    <input type="text" id="name" name="name" required placeholder="Your full name">
                                </div>
                                
                                <div class="form-group">
                                    <label for="email">Email Address</label>
                                    <input type="email" id="email" name="email" required placeholder="Your email address">
                                </div>
                            </div>
                            
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="phone">Phone Number</label>
                                    <input type="tel" id="phone" name="phone" required placeholder="Your phone number">
                                </div>
                                
                                <div class="form-group">
                                    <label for="address">Address</label>
                                    <input type="text" id="address" name="address" required placeholder="Your address">
                                </div>
                            </div>
                            
                            <!-- Form navigation and submit -->
                            <div class="form-navigation">
                                <button type="button" class="btn btn-secondary prev-btn">Previous</button>
                                <button type="submit" class="btn btn-primary">Get Estimate</button>
                            </div>
                        </div>
                    </div>
                </form>

                <!-- Results Section (Initially Hidden) -->
                <div id="result-section" class="result-section" style="display: none;">
                    <h2>Your Estimate</h2>
                    
                    <div class="estimate-card">
                        <div class="estimate-header">
                            <h3>Project Details</h3>
                        </div>
                        
                        <div class="estimate-details">
                            <div class="estimate-row">
                                <div>Project Type:</div>
                                <div id="result-project-type">Residential House</div>
                            </div>
                            
                            <div class="estimate-row">
                                <div>Area:</div>
                                <div id="result-area">0 sq. ft.</div>
                            </div>
                            
                            <div class="estimate-row">
                                <div>Rooms:</div>
                                <div id="result-rooms">0 rooms</div>
                            </div>
                            
                            <div class="estimate-row">
                                <div>Package Level:</div>
                                <div id="result-level">Basic</div>
                            </div>
                            
                            <div class="estimate-divider"></div>
                            
                            <div class="estimate-row total">
                                <div>Estimated Price Range:</div>
                                <div id="result-price-range">₹ 0 - 0</div>
                            </div>
                            
                            <div class="estimate-row" style="font-size: 0.8rem;">
                                <div>Reference ID:</div>
                                <div id="result-quote-id">-</div>
                            </div>
                        </div>
                        
                        <div class="estimate-notes">
                            <p><strong>Note:</strong> This is an approximate estimate based on standard measurements and average market rates.</p>
                            <ul>
                                <li>The final quotation may vary based on specific requirements and material selection.</li>
                                <li>Prices are exclusive of GST.</li>
                                <li>This estimate is valid for 30 days from the date of generation.</li>
                            </ul>
                        </div>
                    </div>
                    
                    <div class="contact-actions">
                        <button type="button" id="save-estimate-btn" class="btn btn-primary">Print Estimate</button>
                        <button type="button" id="recalculate-btn" class="btn btn-secondary">Recalculate</button>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer content (replacing the include) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-info">
                    <h3>Nikhil Interiors</h3>
                    <p>Creating beautiful spaces since 2010</p>
                    <p>Mumbai & Navi Mumbai, Maharashtra</p>
                </div>
                <div class="footer-links">
                    <h4>Quick Links</h4>
                    <ul>
                        <li><a href="/">Home</a></li>
                        <li><a href="/#services">Services</a></li>
                        <li><a href="/#portfolio">Portfolio</a></li>
                        <li><a href="/#pricing">Pricing</a></li>
                        <li><a href="/#contact">Contact</a></li>
                    </ul>
                </div>
                <div class="footer-contact">
                    <h4>Contact Us</h4>
                    <p><i class="fas fa-phone"></i> +91 98765 43210</p>
                    <p><i class="fas fa-envelope"></i> info@nikhilinteriors.com</p>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2025 Nikhil Interiors. All rights reserved.</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // Create user selections object to store form data as user progresses
            const userSelections = {
                projectType: '',
                area: '',
                rooms: '',
                featureLevel: '',
                name: '',
                email: '',
                phone: '',
                address: ''
            };

            // Form element reference
            const form = document.getElementById('calculator-form');

            if (form) {
                form.addEventListener('submit', async function (e) {
                    e.preventDefault();
                    console.log('Form submitted');

                    // Collect form data for API submission
                    try {
                        const response = await fetch('/api/save-quote', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify({
                                projectType: document.querySelector('[name="projectType"]').value,
                                area: document.querySelector('[name="area"]').value,
                                rooms: document.querySelector('[name="rooms"]')?.value || 1,
                                featureLevel: document.querySelector('[name="featureLevel"]').value,
                                name: document.querySelector('[name="name"]').value,
                                email: document.querySelector('[name="email"]').value,
                                phone: document.querySelector('[name="phone"]').value,
                                address: document.querySelector('[name="address"]').value
                            })
                        });

                        const result = await response.json();
                        console.log('Response from server:', result);

                        if (result.success) {
                            // Hide form and show results
                            document.getElementById('calculator-form').style.display = 'none';
                            document.getElementById('result-section').style.display = 'block';

                            // Update result display with server data
                            document.getElementById('result-price-range').textContent = 
                                `₹ ${formatNumber(result.data.minPrice)} - ${formatNumber(result.data.maxPrice)}`;

                        } else {
                            alert('Error: ' + result.message);
                        }
                    } catch (error) {
                        console.error('Error submitting form:', error);
                        alert('An error occurred while submitting your quote. Please try again.');
                    }
                });
            } else {
                console.error('Form element not found!');
            }

            // Pricing rates based on project type and feature level (in ₹ per sq ft)
            const pricingRates = {
                'residential-house': {
                    'basic': { min: 1000, max: 1500 },
                    'premium': { min: 1600, max: 2200 },
                    'luxury': { min: 2300, max: 3000 }
                },
                'residential-apartment': {
                    'basic': { min: 1100, max: 1600 },
                    'premium': { min: 1700, max: 2300 },
                    'luxury': { min: 2400, max: 3100 }
                },
                'office': {
                    'basic': { min: 1200, max: 1700 },
                    'premium': { min: 1800, max: 2400 },
                    'luxury': { min: 2500, max: 3200 }
                }
            };

            // Step 1: Project Type Selection
            const projectTypeCards = document.querySelectorAll('.project-type-card');
            projectTypeCards.forEach(card => {
                card.addEventListener('click', function () {
                    // Remove active class from all cards
                    projectTypeCards.forEach(c => c.classList.remove('active'));

                    // Add active class to selected card
                    this.classList.add('active');

                    // Store selected project type
                    const projectType = this.getAttribute('data-type');
                    userSelections.projectType = projectType;
                    document.getElementById('projectType').value = projectType;

                    // Enable the next button
                    document.querySelector('#step-1 .next-btn').disabled = false;
                });
            });

            // Step 3: Feature Level Selection
            const featureLevelCards = document.querySelectorAll('.feature-level-card');
            featureLevelCards.forEach(card => {
                card.addEventListener('click', function () {
                    // Remove active class from all cards
                    featureLevelCards.forEach(c => c.classList.remove('active'));

                    // Add active class to selected card
                    this.classList.add('active');

                    // Store selected feature level
                    const featureLevel = this.getAttribute('data-level');
                    userSelections.featureLevel = featureLevel;
                    document.getElementById('featureLevel').value = featureLevel;

                    // Enable the next button
                    document.querySelector('#step-3 .next-btn').disabled = false;
                });
            });

            // Form Navigation
            const formSteps = document.querySelectorAll('.form-step');
            const progressSteps = document.querySelectorAll('.progress-step');

            // Next button action
            document.querySelectorAll('.next-btn').forEach(button => {
                button.addEventListener('click', function () {
                    const currentStep = this.closest('.form-step');
                    const currentStepIndex = Array.from(formSteps).indexOf(currentStep);

                    if (currentStepIndex === 1) {
                        // Store area and rooms when moving from step 2
                        userSelections.area = document.getElementById('area').value;
                        userSelections.rooms = document.getElementById('rooms').value;
                    }

                    // Move to next step
                    currentStep.classList.remove('active');
                    formSteps[currentStepIndex + 1].classList.add('active');

                    // Update progress indicator
                    progressSteps[currentStepIndex].classList.add('completed');
                    progressSteps[currentStepIndex + 1].classList.add('active');
                });
            });

            // Previous button action
            document.querySelectorAll('.prev-btn').forEach(button => {
                button.addEventListener('click', function () {
                    const currentStep = this.closest('.form-step');
                    const currentStepIndex = Array.from(formSteps).indexOf(currentStep);

                    // Move to previous step
                    currentStep.classList.remove('active');
                    formSteps[currentStepIndex - 1].classList.add('active');

                    // Update progress indicator
                    progressSteps[currentStepIndex].classList.remove('active');
                    progressSteps[currentStepIndex - 1].classList.add('active');
                });
            });

            // Handle form calculation for immediate UI feedback
            if (document.getElementById('calculator-form')) {
                document.getElementById('calculator-form').addEventListener('submit', function (e) {
                    e.preventDefault();

                    // Collect form data
                    const formData = new FormData(this);
                    userSelections.name = formData.get('name');
                    userSelections.email = formData.get('email');
                    userSelections.phone = formData.get('phone');
                    userSelections.address = formData.get('address');

                    // Calculate price range
                    const projectType = userSelections.projectType;
                    const featureLevel = userSelections.featureLevel;
                    const area = parseInt(userSelections.area);

                    const rateRange = pricingRates[projectType][featureLevel];
                    const minPrice = rateRange.min * area;
                    const maxPrice = rateRange.max * area;

                    // Display results
                    document.getElementById('result-project-type').textContent = getProjectTypeName(projectType);
                    document.getElementById('result-area').textContent = `${area} sq. ft.`;
                    document.getElementById('result-level').textContent = capitalizeFirst(featureLevel);
                    document.getElementById('result-price-range').textContent = `₹ ${formatNumber(minPrice)} - ${formatNumber(maxPrice)}`;

                    // Hide form and show results
                    document.getElementById('calculator-form').style.display = 'none';
                    document.getElementById('result-section').style.display = 'block';
                });
            }

            // Recalculate button action
            if (document.getElementById('recalculate-btn')) {
                document.getElementById('recalculate-btn').addEventListener('click', function () {
                    document.getElementById('calculator-form').style.display = 'block';
                    document.getElementById('result-section').style.display = 'none';

                    // Reset to first step
                    formSteps.forEach(step => step.classList.remove('active'));
                    formSteps[0].classList.add('active');

                    progressSteps.forEach(step => {
                        step.classList.remove('active');
                        step.classList.remove('completed');
                    });
                    progressSteps[0].classList.add('active');
                });
            }

            // Helper functions
            function getProjectTypeName(type) {
                const names = {
                    'residential-house': 'Residential House',
                    'residential-apartment': 'Residential Apartment',
                    'office': 'Office Space'
                };
                return names[type] || type;
            }

            function capitalizeFirst(string) {
                return string.charAt(0).toUpperCase() + string.slice(1);
            }

            function formatNumber(num) {
                return num.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g, '$1,');
            }

            // Save quote button action
            if (document.getElementById('save-estimate-btn')) {
                document.getElementById('save-estimate-btn').addEventListener('click', async function() {
                    try {
                        const response = await fetch('/api/save-quote', {
                            method: 'POST',
                            headers: {
                                'Content-Type': 'application/json',
                            },
                            body: JSON.stringify(userSelections)
                        });
                        
                        const result = await response.json();
                        if (result.success) {
                            alert('Your estimate has been saved. Reference ID: ' + result.data.quoteId);
                        } else {
                            alert('Error: ' + result.message);
                        }
                    } catch (error) {
                        console.error('Error saving estimate:', error);
                        alert('Failed to save your estimate. Please try again.');
                    }
                });
            }
        });
    </script>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    // Get references to important elements
    const form = document.getElementById('calculator-form');
    const resultSection = document.getElementById('result-section');
    let savedQuoteId = null; // Store the quote ID after saving
    
    // Function to format numbers with commas
    function formatNumber(num) {
        return num.toLocaleString('en-IN');
    }
    
    // Function to get user-friendly project type name
    function getProjectTypeName(type) {
        const names = {
            'residential-house': 'Residential House',
            'residential-apartment': 'Residential Apartment',
            'office': 'Office Space'
        };
        return names[type] || type;
    }
    
    // Function to capitalize first letter
    function capitalizeFirst(str) {
        return str.charAt(0).toUpperCase() + str.slice(1);
    }
    
    // Handle form submission with auto-save
    if (form) {
        form.addEventListener('submit', async function(e) {
            e.preventDefault();
            console.log('Form submitted - processing estimate and saving...');
            
            // Get form data
            const projectType = document.getElementById('projectType').value;
            const area = parseFloat(document.getElementById('area').value);
            const rooms = parseInt(document.getElementById('rooms').value || 1);
            const featureLevel = document.getElementById('featureLevel').value;
            const name = document.getElementById('name').value;
            const email = document.getElementById('email').value;
            const phone = document.getElementById('phone').value;
            const address = document.getElementById('address').value;
            
            // Validate required fields
            if (!projectType || !area || !featureLevel || !name || !email || !phone || !address) {
                alert('Please fill in all required fields');
                console.error('Form validation failed - missing required fields');
                return;
            }
            
            try {
                showNotification('Generating your estimate...', 'info');
                
                // Submit to server immediately to save quote
                const response = await fetch('/api/save-quote', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        projectType,
                        area,
                        rooms,
                        featureLevel,
                        name,
                        email,
                        phone,
                        address
                    })
                });
                
                const result = await response.json();
                console.log('Server response:', result);
                
                if (result.success) {
                    // Store quote ID
                    savedQuoteId = result.data.quoteId;
                    
                    // Show results
                    document.getElementById('result-project-type').textContent = getProjectTypeName(projectType);
                    document.getElementById('result-area').textContent = `${area} sq. ft.`;
                    document.getElementById('result-rooms').textContent = `${rooms} rooms`;
                    document.getElementById('result-level').textContent = capitalizeFirst(featureLevel);
                    document.getElementById('result-price-range').textContent = 
                        `₹ ${formatNumber(result.data.minPrice)} - ${formatNumber(result.data.maxPrice)}`;
                    
                    // Set quote ID in results
                    if (document.getElementById('result-quote-id')) {
                        document.getElementById('result-quote-id').textContent = savedQuoteId;
                    }
                    
                    // Hide form and show results
                    form.style.display = 'none';
                    resultSection.style.display = 'block';
                    
                    // Convert the "Save Estimate" button to "Print Estimate" button
                    const saveButton = document.getElementById('save-estimate-btn');
                    if (saveButton) {
                        saveButton.innerHTML = '<i class="fas fa-print"></i> Print Estimate';
                        saveButton.className = 'btn btn-primary';
                        saveButton.id = 'print-estimate-btn';
                        
                        // Remove existing click handlers and add print handler
                        saveButton.replaceWith(saveButton.cloneNode(true));
                        document.getElementById('print-estimate-btn').addEventListener('click', printEstimate);
                    }
                    
                    showNotification('Your estimate has been saved successfully!', 'success');
                } else {
                    console.error('Error from server:', result.message);
                    showNotification('There was a problem saving your estimate. Please try again.', 'error');
                }
            } catch (error) {
                console.error('Error calculating or saving estimate:', error);
                showNotification('There was a problem processing your estimate. Please try again.', 'error');
            }
        });
    }
    
    // Function to print estimate
    function printEstimate() {
        console.log('Printing estimate...');
        
        const projectType = document.getElementById('result-project-type').textContent;
        const area = document.getElementById('result-area').textContent;
        const rooms = document.getElementById('result-rooms').textContent;
        const level = document.getElementById('result-level').textContent;
        const priceRange = document.getElementById('result-price-range').textContent;
        const quoteId = document.getElementById('result-quote-id')?.textContent || savedQuoteId || '';
        const name = document.getElementById('name').value;
        
        const printWindow = window.open('', '_blank');
        
        printWindow.document.write(`
            <!DOCTYPE html>
            <html>
            <head>
                <title>Interior Design Estimate - Nikhil Interiors</title>
                <style>
                    /* Compact single-page print layout */
                    body {
                        font-family: Arial, sans-serif;
                        font-size: 11pt;
                        line-height: 1.4;
                        color: #333;
                        max-width: 800px;
                        margin: 0 auto;
                        padding: 15px;
                    }
                    
                    .header {
                        text-align: center;
                        margin-bottom: 15px;
                        padding-bottom: 10px;
                        border-bottom: 1px solid #ddd;
                    }
                    
                    .logo {
                        font-size: 18pt;
                        font-weight: bold;
                        margin-bottom: 2px;
                    }
                    
                    .tagline {
                        font-style: italic;
                        color: #666;
                        font-size: 10pt;
                        margin-bottom: 5px;
                    }
                    
                    h1 {
                        font-size: 16pt;
                        margin: 10px 0 5px 0;
                    }
                    
                    .customer-info {
                        display: flex;
                        justify-content: space-between;
                        margin-bottom: 10px;
                        font-size: 10pt;
                    }
                    
                    .estimate-details {
                        margin-top: 15px;
                    }
                    
                    .estimate-row {
                        display: flex;
                        margin-bottom: 5px;
                        padding-bottom: 3px;
                        border-bottom: 1px dotted #eee;
                    }
                    
                    .estimate-label {
                        width: 120px;
                        font-weight: bold;
                        font-size: 10pt;
                    }
                    
                    .estimate-value {
                        flex-grow: 1;
                        font-size: 10pt;
                    }
                    
                    .columns {
                        display: flex;
                        gap: 20px;
                        margin-top: 15px;
                    }
                    
                    .column {
                        flex: 1;
                    }
                    
                    .price-section {
                        margin: 10px 0;
                        padding: 10px;
                        background-color: #f9f9f9;
                        border-radius: 5px;
                    }
                    
                    .price-heading {
                        font-size: 11pt;
                        font-weight: bold;
                        margin-bottom: 5px;
                    }
                    
                    .price-amount {
                        font-size: 14pt;
                        font-weight: bold;
                        color: #2a5885;
                        margin: 5px 0;
                    }
                    
                    .notes {
                        font-size: 9pt;
                        color: #666;
                        margin-top: 15px;
                    }
                    
                    .notes ul {
                        margin: 5px 0;
                        padding-left: 20px;
                    }
                    
                    .notes li {
                        margin-bottom: 2px;
                    }
                    
                    .footer {
                        margin-top: 15px;
                        font-size: 9pt;
                        text-align: center;
                        color: #888;
                        border-top: 1px solid #ddd;
                        padding-top: 8px;
                    }
                    
                    .quote-id {
                        font-size: 9pt;
                        color: #888;
                        margin-top: 15px;
                        text-align: right;
                    }
                    
                    @media print {
                        @page {
                            margin: 0.5cm;
                            size: portrait;
                        }
                        
                        body {
                            margin: 0;
                            padding: 10px;
                            -webkit-print-color-adjust: exact;
                            print-color-adjust: exact;
                        }
                        
                        .no-break {
                            page-break-inside: avoid;
                        }
                    }
                </style>
            </head>
            <body>
                <div class="header">
                    <div class="logo">Nikhil Interiors</div>
                    <div class="tagline">Design • Create • Inspire</div>
                </div>
                
                <h1>Interior Design Estimate</h1>
                
                <div class="customer-info">
                    <div>Date: ${new Date().toLocaleDateString()}</div>
                    <div>Prepared for: ${name}</div>
                </div>
                
                <div class="columns">
                    <div class="column">
                        <div class="estimate-details">
                            <div class="estimate-row">
                                <div class="estimate-label">Project Type:</div>
                                <div class="estimate-value">${projectType}</div>
                            </div>
                            <div class="estimate-row">
                                <div class="estimate-label">Area:</div>
                                <div class="estimate-value">${area}</div>
                            </div>
                            <div class="estimate-row">
                                <div class="estimate-label">Rooms:</div>
                                <div class="estimate-value">${rooms}</div>
                            </div>
                            <div class="estimate-row">
                                <div class="estimate-label">Package Level:</div>
                                <div class="estimate-value">${level}</div>
                            </div>
                        </div>
                        
                        <div class="price-section no-break">
                            <div class="price-heading">Estimated Cost Range:</div>
                            <div class="price-amount">${priceRange}</div>
                            <div>Based on your project specifications</div>
                        </div>
                    </div>
                    
                    <div class="column notes">
                        <p><strong>Note:</strong></p>
                        <ul>
                            <li>This is an approximate estimate based on standard measurements and average market rates.</li>
                            <li>Final pricing may vary based on specific requirements and material selection.</li>
                            <li>Prices are exclusive of GST (Goods and Services Tax).</li>
                            <li>This estimate is valid for 30 days from the date of issue.</li>
                        </ul>
                        
                        <p><strong>Next Steps:</strong></p>
                        <ul>
                            <li>Our design team will contact you within 24-48 hours.</li>
                            <li>A detailed site visit will be arranged at your convenience.</li>
                            <li>Final quotation will be provided after site assessment.</li>
                        </ul>
                    </div>
                </div>
                
                ${quoteId ? `<div class="quote-id">Reference ID: ${quoteId}</div>` : ''}
                
                <div class="footer no-break">
                    <p>Thank you for choosing Nikhil Interiors!</p>
                    <p>Mumbai & Navi Mumbai | +91 98765 43210 | info@nikhilinteriors.com | www.nikhilinteriors.com</p>
                </div>
            </body>
            </html>
        `);
        
        setTimeout(() => {
            printWindow.document.close();
            printWindow.focus();
            printWindow.print();
        }, 500);
    }
    
    // Function to show notifications
    function showNotification(message, type = 'info') {
        // Remove any existing notifications
        const existingNotifications = document.querySelectorAll('.notification');
        existingNotifications.forEach(note => note.remove());
        
        // Create new notification
        const notification = document.createElement('div');
        notification.className = `notification notification-${type}`;
        notification.innerHTML = message;
        document.body.appendChild(notification);
        
        // Show notification
        setTimeout(() => notification.classList.add('show'), 10);
        
        // Auto-hide after delay
        setTimeout(() => {
            notification.classList.remove('show');
            setTimeout(() => notification.remove(), 300);
        }, 5000);
    }
    
    // Initialize form navigation and other UI elements
    // ...other initialization code...
});
</script>
</body>

</html>